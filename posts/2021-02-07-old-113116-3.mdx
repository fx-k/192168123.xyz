---
title: "[科普向]不想背电脑?教你在外如何优雅的远程宿舍的电脑"
date: '2021-02-07T21:12:00Z'
tags:
  - 旧博客内容
  - 技术向
updatedOn: '2021-02-07T22:08:31Z'
---

:::tip
本文迁移自老博客，原始链接已隐藏。
:::

:::warning
注意，本文章所包含的资源分享可能已丢失。
:::

相信很多小伙伴们都曾听说过“云电脑”，但目前而言，云电脑首先就是一笔大的开支，其次，云电脑与宿舍电脑的数据不互通也成为了一大麻烦。

而在学校，我们在外可能会出现忘带电脑、饱受背电脑的苦恼，又或者是面临前几天写好的论文在电脑上却一时忘带的尴尬…

其实我们在宿舍就可以搭建一个“云电脑”，这期我们就开始为大家一步步地搭建一个“云电脑”，从而实现在宿舍外随时访问宿舍内的电脑桌面以及文件。

---

## Part.1原理篇

开始之前，我们应该先了解一下我们这个“云电脑”的实现原理：

![image-20240705215730577](https://oss.keke.su/image/2024/07/12293cc3901dcf6372362980b12f2f71.png)

这里红色的箭头就是表示从你的手机或者其他设备访问到你宿舍电脑时的网络路由顺序。

那么很多人可能会问，为什么需要“一台有公网ip的服务器”，其实这是因为我们宿舍内的电脑连接的网络一般是没有提供公网ip的。

很多小伙伴可能就懵了，何为公网ip？简单理解，有公网ip就可以实现下面这样的访问： 

![image-20240705215828678](https://oss.keke.su/image/2024/07/2a3ad2bb463107f7894badeb67c90e09.png)

![image-20240705215846406](https://oss.keke.su/image/2024/07/2137f2590aa0b60da631909660e3230a.png)

所以经过这一层路由器，我们就无法简单地通过一个公网ip（123.3.3.3）来定位到某个学生的电脑（172.16.93.x）…

所以，我们就需要一台有公网ip的服务器进行转发。

## Part.2操作篇

### 文章目录
面对不同的同学，有不同的需求，本文为0基础全面教学文章且涉及原理，下面篇幅较长，请按照自己的需要跳转到对应部分阅读：

- 方案一   需要远程访问宿舍电脑桌面并进行操作的

  - 1     (rdp自建方案)使用自己的服务器，安全性高，电脑不需要额外安装软件，但是可能需要花钱购入服务器（或者白嫖别人的）
    - 开始   在电脑上启用rdp服务，启用后，根据自己需求选择A/B段阅读
    - A段   购买服务器进行rdp转发
    - B段   使用现成的第三方内网穿透工具进行rdp转发
    
  - 2     (使用第三方现成软件方案)使用别人的服务器，安全性低，电脑需要额外安装软件，适合不想折腾的
  
- 方案二   仅需要远程访问宿舍电脑内的文件，不需要访问宿舍电脑桌面的

（注意：如果你宿舍电脑连接的是校园网，并且你的设备可以连接到校园网wifi的话，方案一方案二都可以省略内网穿透这一步骤，直接把公网ip换成你宿舍内电脑的校园网内网ip即可直接访问，实现原理如下图： ）

### 方案一：远程访问电脑桌面

#### 1. 使用微软自带的Remote Desktop Protocol（简称RDP）

RDP是微软的一个远程协议，RDP有着很多第三方远程软件没有的优点——速度快、原生化、广泛化，所有的Windows系统都会有RDP，它通过3389端口来连接。我们按下Win+R然后输入mstsc，就可以看到这个东西了。

在你宿舍的电脑上做如下操作：

首先先在你的电脑上为你的账户设置好密码，并且关闭Windows防火墙(自行百度解决)。

然后按照如下操作打开rdp远程功能：

![image-20240705220213820](https://oss.keke.su/image/2024/07/0bfd15562bd2a66b31b77ebc20e04294.png)

即可打开电脑的RDP远程功能。

注意：如果你的电脑不是Windows专业版，可能没有远程桌面功能，你可以去某宝搜索“win10专业版”，卖家会协助你无损升级到Windows10专业版。

然后对宿舍内电脑设置不休眠，这样才能保证我们能随时连上电脑：

![image-20240705220235868](https://oss.keke.su/image/2024/07/e0387595b19c7f8aa8fe20104312453c.png)

##### 方案A: 自建穿透

然后，购入一台服务器（不想购入或者不会linux基础的请直接跳转到B段），我建议是用国内的服务器（延迟比较低），比如阿里云/腾讯云/华为云…安装好linux系统，连接上ssh并开放防火墙后，直接输入以下命令安装frp服务端(frp是一个远程穿透工具，有兴趣可以自行去GitHub了解)：

```bash
wget --no-check-certificate https://download.file0319.fxit.top/cloudreve/2020/11/16/lUb3bpk8_install-frps.sh -O ./ lUb3bpk8_install-frps.sh 

#有些国内机器可能连接GitHub不是很顺畅，所以上面给了我的加速链接，如果失效可以尝试换成官方的https://raw.githubusercontent.com/clangcn/onekey-install-shell/master/frps/install-frps.sh，无法连接GitHub可以考虑修改hosts

chmod 700 ./install-frps.sh
./install-frps.sh install
```


然后下面一系列问答窗口不懂的话一直敲回车就可以了。

然后在自己宿舍的电脑上安装frp客户端，一般是Windows系统，下载https://233456.xyz/#/s/zRFQ (也可自行去GitHub作者项目下面下载最新版)，解压后移到c:\frpc目录，然后编辑frpc.ini，把内容替换成一下内容：

```ini
[common]
server_addr = 你的服务器公网ip
server_port = 5443

[rdp]
type = tcp
local_ip = 127.0.0.1
local_port = 3389
remote_port = 3389
```

然后win+r，输入cmd，输入`c:\frpc\frpc.exe -c c:\frpc\frpc.ini`并不要关掉这个窗口，内网穿透就成功了。

然后，打开你的手机/平板，安装rdp软件(可前往应用商店自行下载)，然后输入你服务器的公网ip，输入你电脑的账户密码即可连接成功。

·附上RDP下载链接：

https://hn-aboutme.fxit.top/download/rdp/index.html

（在哪个设备使用就用哪个设备打开这个链接，我做了个自动判断跳转到对应版本软件）

![image-20240705220656013](https://oss.keke.su/image/2024/07/099ca6f36f676fded882183ef88fba36.png)

##### 方案B：第三方穿透服务

其实，还可以白嫖第三方现成的内网穿透工具。

事实上，很多第三方平台提供了免费/收费的内网穿透服务，他们的优点是**不需要自己购买服务器和配置服务器**，缺点就是**免费的速度可能比较慢**。

下面列出一些可以提供免费内网穿透的平台：

1. http://www.ngrok.cc/ ——去这个平台注册一个账户，然后去网站后台开通一个隧道(美国Ngrok免费服务器 是免费的)，如下：

   ![image-20240705220749721](https://oss.keke.su/image/2024/07/d03615bc4c8554a2fe2c3248a8f68bc1.png)

   注意：这家的免费隧道服务一段时间没有流量的话会自动删除。

   然后在电脑上参考以下教程连接隧道即可：http://www.ngrok.cc/_book/start/ngrok_windows.html

2. http://nat123.com/ ——这家操作类似，但是需要下载他家的官方客户端。操作比较傻瓜化，可以自行研究。

3. https://hsk.oray.com/ ——花生壳也提供免费内网穿透服务，速度还可以，操作也差不多。

在使用上述工具内网穿透成功后，打开你的手机/平板，安装rdp软件(可前往应用商店自行下载)，然后输入你服务器的公网ip，输入你电脑的账户密码即可连接成功。

#### 2.使用第三方现成的远程桌面工具
这些工具一般都很容易操作，这里只列举几个比较推荐的远程桌面平台，不做过多详细介绍：

1. https://anydesk.com/zhs 很好用的轻量级远程桌面软件，可以实现协同合作，完全免费，有能力也可以将该软件的7070端口映射出去加速远程访问。

   1. 在宿舍电脑上下载anydesk(建议去官网下载最新版)
      安装这个： https://233456.xyz/#/s/lYHZ

   2. 打开软件，稍等一会等待anydesk连接上服务器，直到在“此工作台”看到一串数字，记下这串数字，然后按照如下操作配置anydesk无监督访问：

      ![image-20240705220912041](https://oss.keke.su/image/2024/07/dc92c9dde420385b3afdcd65988f82d5.png)

      ![image-20240705220916282](https://oss.keke.su/image/2024/07/2eb1c12bc6593096c4002cab18909ae7.png)

      然后对宿舍内电脑设置不休眠，这样才能保证我们能随时连上电脑：

      ![image-20240705220931395](https://oss.keke.su/image/2024/07/e0387595b19c7f8aa8fe20104312453c.png)

   3. 在手机/平板上安装这个：https://hn-aboutme.fxit.top/download/anydesk/index.html

      （在哪个设备使用就用哪个设备打开这个链接，我做了个自动判断跳转到对应版本软件）

   4. 在手机/平板上打开anydesk软件，然后输入你记录下的数字，再输入你设置的密码，就可以连接上你的电脑了！

      ![image-20240705220958294](https://oss.keke.su/image/2024/07/207897db938be4dd4c3833bc9b2fcb22.png)

2. https://www.teamviewer.cn/ 众所周知的远程软件，个人版免费，效果还不错。

3. https://www.todesk.com/ 跟软件1差不多，挺好用。

### 方案二：远程访问电脑文件

远程访问电脑文件其实有很多方案，最常见的就是ftp，但是ftp其实在手机端配置比较繁琐，所以我们为了方便，可以搭建一个web端（通俗来讲就是一个网站）的文件管理界面，这样我们就可以在任何设备上面打开这个网站，登录我们设置的账号密码，就可以访问/浏览/下载我们宿舍电脑内的文件。

实现思路：

![image-20240705221040217](https://oss.keke.su/image/2024/07/b122d6d44b74fc3fee03f6159e54d6d1.png)

1. 部署nginx+php，这里我们可以很方便的使用phpstudy来部署。在我们的电脑上下载https://233456.xyz/#/s/EmtL ，安装好按照如下操作：

   ![image-20240705221050402](https://oss.keke.su/image/2024/07/3faf2d8436a6554384c1556e7d6b0cf9.png)

   然后会弹出一个文件夹窗口。

2. 接着下载kodcloud：https://233456.xyz/#/s/e2cA  并解压把里面的文件覆盖到刚刚弹出的文件夹内，覆盖好之后，文件夹里面应该是这样的：

   ![image-20240705221107145](https://oss.keke.su/image/2024/07/54d37478e65a971ef3bee18823f5a79c.png)

3. 这样，我们打开电脑浏览器，访问http://127.0.0.1 按照引导设置账号密码，然后就可以看到文件管理页面已经搭建好了。

   ![image-20240705221117175](https://oss.keke.su/image/2024/07/dd194573e23d5747e3458e1ddae913b2.png)

   ![image-20240705221121518](https://oss.keke.su/image/2024/07/bda6ba47f943fcf81807d262e71b8943.png)

4. 接着做的事情，就是内网穿透，把内网的这个网站映射到外网，这里内网穿透部分与上文【方案一】重叠，请参考上文【方案一】并把3389端口改成80端口即可。

   PS：部分服务商可能会拦截ip:80端口直接访问，如果提示未备案被拦截，把外网端口改成12345这样的非80和443端口即可使用。

5. 然后在任意设备上，打开浏览器，输入http://公网ip ，然后输入你之前设置的账号密码即可访问/浏览/下载你宿舍电脑内的文件。

   ![image-20240705221311696](https://oss.keke.su/image/2024/07/15ae5c801777ba4ad10eaa7a65890839.png)
